<section class="border-b py-3">

    <div class="flex flex-row justify-between p-2 hover:bg-gray-200">

        <div class="flex flex-row" x-data="{ open: false }" @set-open{{.ID}}.window="open = $event.detail">

            <h3 class="font-bold" x-show="!open">{{.Name}}</h3>

            <form x-transition:enter hx-put="/{{.Url}}/category/{{.ID}}" x-show="open" hx-target="closest section" hx-swap="outerHTML" >
                <div class="flex flex-row">
                    <input id="updateCat{{.ID}}" type="text" name="name" value="{{.Name}}"
                    class="bg-gray-200 appearance-none border-2 border-gray-200 rounded 
                    w-full py-1 px-1 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500"
                    >

                    <button type="button"  @click="$dispatch('set-open{{.ID}}', true); open = !open;">❌</button>

                    <button type="submit">✔️</button>
                </div>
                

            </form>

        </div>
    
        <div x-transition x-show="open" x-data="{ open: true }" @set-open{{.ID}}.window="open = $event.detail">

            <button class="hover:bg-gray-400"  @click="$dispatch('set-open{{.ID}}', true); open = !open; 
            $nextTick(() => { setTimeout(() => { document.getElementById('updateCat{{.ID}}').focus(); }, 300);});">✏️</button>

            <button class="hover:bg-gray-400"  hx-delete="/{{.Url}}/category/{{.ID}}" hx-target="closest section" hx-swap="delete"
            hx-confirm="Are you sure you wish to delete {{.Name}}?"
            >❌</button>

        </div>

    </div>

    <!-- ITEMS -->

    <section>

        <div id="Item{{.ID}}">
        {{ range .Items }}
            {{ if eq .Done false }}
                {{ template "item.html" . }}
            {{ end }}            
        {{ end }}

        </div>

        

        <div x-data="{ open: false }" class="flex flex-row justify-between ml-7">

            <button class="font-bold" x-transition:enter.duration.500ms x-show="!open" x-on:click="open = ! open"
            @click="$nextTick(() => { setTimeout(() => { document.getElementById('input_item{{.ID}}').focus(); }, 300);});"
            >+ item</button>

            <form x-transition:enter.duration.500ms x-show="open" hx-post="/{{.Url}}/item/{{.ID}}" hx-swap="beforeend" hx-target="#Item{{.ID}}">
                <input class="iteminput" type="text" name="name" id="input_item{{.ID}}" required>
                <button type="button" x-on:click="open = ! open">✖️</button>
                <button type="submit" x-on:click="open = ! open">✔️</button>
            </form>
        
        </div>

        
   
    </section>
    
</section>